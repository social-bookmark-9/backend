![](https://bubbled-profile-image.s3.ap-northeast-2.amazonaws.com/email-image/logoDark.png) 
# BUBBLE_D

## ğŸŒŸ ì„œë¹„ìŠ¤ ì†Œê°œ
BUBBLEDëŠ” ì›¹í˜ì´ì§€ ë§í¬ ì €ì¥ (ë¶ë§ˆí¬) ë° ê³µìœ  í”Œë«í¼ ì…ë‹ˆë‹¤.  
ê°œë°œì, ë””ìì´ë„ˆ, ì·¨ì¤€ìƒ, í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €, ëŒ€í•™ìƒ ë“± ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ì´ í‰ì†Œì— ê´€ì‹¬ìˆëŠ” ë¶„ì•¼ì˜ ê¸€ì„ íƒœê·¸ë¥¼ ì„¤ì •í•˜ì—¬ ëª¨ì•„ë†“ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë˜í•œ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì˜ ëª¨ì•„ë†“ì€ ì–‘ì§ˆì˜ ë¶ë§ˆí¬ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ì´ë©”ì¼ì„ í†µí•´ ë¦¬ë§ˆì¸ë“œ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì½ì–´ì•¼ í•  ê¸€ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ‘« íŒ€ì› ì†Œê°œ &  ğŸ“… ì œì‘ ê¸°ê°„

- **Back End**
    - ì„í˜„ìš°(íŒ€ì¥)([https://github.com/hyunwoome](https://github.com/hyunwoome))
    - ì´ì˜ìš±([https://github.com/wowba](https://github.com/wowba))
    - ê¹€ìˆ˜ë™([https://github.com/Sudongk](https://github.com/Sudongk))
- **Front End**
    - ì´ì •ë¯¼(ë¶€íŒ€ì¥)([https://github.com/jeongmin-dev](https://github.com/jeongmin-dev))
    - ì´ìœ¤ìˆ˜([https://github.com/yonslee](https://github.com/yonslee))
- **Deginer**
    - ì´ê°€ì¸
    - ì´ê²½ë¯¸
- **Production Period**
    - 2022 / 03 / 04 ~ 2022 / 04 / 08 
    - í˜„ì¬ ìœ ì§€ë³´ìˆ˜ì¤‘...

## ğŸ¢ Project Architecture
![í”„ë¡œì íŠ¸ ì•„í‚¤í…ì³](https://user-images.githubusercontent.com/76833697/161889252-2fa7d4f9-da8f-4b8f-8a94-78f6f2b83545.png)

## ğŸ”§ Tech Stack

- JAVA 8
- Spring Boot 2.4.0
- Amazon AWS
- Amazon S3
- Github Actions
- Mysql 8.0

## ğŸ“Œ Library

|     library     |   description   |
|:---------------:|:---------------:|
| Spring Security |    ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„    |
|   Validation    |     ìœ íš¨ì„± ê²€ì‚¬      |
| Springboot-mail |     ë©”ì¼ì„œë²„ êµ¬í˜„     |
| Spring Data JPA |    ê°œë°œìƒì‚°ì„± ì¦ëŒ€     |
|     Lombok      |    ê°œë°œìƒì‚°ì„± ì¦ëŒ€     |
|      JJWT       |    jwt í† í° ë°œê¸‰    |
|      Jsoup      | URL meta íƒœê·¸ í¬ë¡¤ë§ |
|    Thymeleaf    |  ì´ë©”ì¼ HTML ì»¤ìŠ¤í…€   |
|      Slf4j      |    ë¡œê¹… ì „ëµ êµ¬í˜„     |
|    Querydsl     |    ë³µì¡í•œ ì¿¼ë¦¬ êµ¬í˜„    |

## ğŸ”  API

## [BUBBLED API ë¦¬ìŠ¤íŠ¸](https://bubbled.notion.site/fd1d1c5c6a3c42bbbfe18d4cf029c284?v=e7f88371b99b4da895856e98dc20432a)

## ğŸ“‹ ERD

![ERD](https://user-images.githubusercontent.com/76833697/160228811-a41c505e-2ef1-4fd2-8c9a-38f5a94bf701.png)

## ğŸ’¥ í•µì‹¬ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

<details>
<summary><b>ğŸ“ˆ ë¶€í•˜í…ŒìŠ¤íŠ¸ ì§„í–‰</b></summary>

![ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „](https://user-images.githubusercontent.com/87873821/162202178-d3032ea1-0eb8-4880-bafd-2caaee158768.jpg)
![ë¶€í•˜í…ŒìŠ¤íŠ¸ í›„](https://user-images.githubusercontent.com/87873821/162202453-bf8eba90-2528-4e03-8f6f-308d6856bcd8.jpg)
</details>

<details>
<summary><b> ğŸ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹° / JWT í† í° ì—ëŸ¬ í•¸ë“¤ëŸ¬</b></summary>

Jwt Authentication Filterì—ì„œ í† í° ë§Œë£Œì‹œ íŠ¹ì • ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ë‚´ë ¤ì£¼ë ¤ê³  í–ˆì§€ë§Œ,  
ëª¨ë“  ì—ëŸ¬ê°€ @RestControllerAdviceì˜ HandelAccessDenied í•­ëª©ì— ê±¸ë¦¬ë©´ì„œ í•  ìˆ˜ ì—†ì—ˆë‹¤.

ì•Œì•„ë³´ë‹ˆ Filterë‹¨ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš° ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ í†µê³¼í•˜ë©´ì„œ ì—ëŸ¬ê°€ ë‹¨ì¼í™”ê°€ ë˜ì–´ìˆì—ˆë‹¤.  
ê·¸ë˜ì„œ ê¸€ë¡œë²Œ ì—ëŸ¬ í•¸ë“¤ëŸ¬ê°€ ì•„ë‹Œ, Filterë‹¨ì—ì„œ ë…ìì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í–ˆë‹¤.  
ë˜í•œ FiterëŠ” Dispatcher Servelet ë³´ë‹¤ ì•ë‹¨ì— ìˆê¸°ì—, Exception Handelerì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ì—†ì—ˆë‹¤.

![í•„í„°, ìŠ¤í”„ë§ êµ¬ì¡°](https://media.vlpt.us/images/hellonayeon/post/4ec2d270-11bd-43c7-ac02-829b0ae9b280/image.png)

ê·¸ë˜ì„œ ìš”ì²­ì´ ë“¤ì–´ì˜¨ë‹¤ë©´ Jwt Authentication Filterë¥¼ ë°”ë¡œ ê°€ì§€ ì•Šê³  Jwt Exception Filterë¥¼  
í•˜ë‚˜ ë” ë§Œë“¤ì–´ ì˜ˆì™¸ê°€ ë˜ì ¸ì§„ë‹¤ë©´ í•´ë‹¹ Filterì—ì„œ Catchí•´ ì»¤ìŠ¤í…€í•œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë‚´ë ¤ì¤„ ìˆ˜ ìˆê²Œ í–ˆë‹¤.

~~~java
public class JwtExceptionFilter extends OncePerRequestFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest req, HttpServletResponse res, FilterChain chain) throws ServletException, IOException {
        try {
            chain.doFilter(req, res); // JwtAuthenticationFilterë¡œ ì´ë™
        } catch (JwtException ex) {
            setErrorResponse(HttpStatus.UNAUTHORIZED, res, ex);
        }
    }
    
    // ì—ëŸ¬ë¥¼ ìºì¹˜í•  ê²½ìš° í•´ë‹¹ Responseë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ë‚´ë ¤ì¤€ë‹¤!
    public void setErrorResponse(HttpStatus status, HttpServletResponse response, Throwable ex) throws IOException {
        response.setStatus(status.value());
        response.setContentType("application/json; charset=UTF-8");

        JSONObject responseJson = new JSONObject();
        responseJson.put("HttpStatus", HttpStatus.UNAUTHORIZED);
        responseJson.put("message", ex.getMessage());
        responseJson.put("status", false);
        responseJson.put("statusCode", 401);
        responseJson.put("code", "401");
        response.getWriter().print(responseJson);
    }
}
~~~

</details>

## â“ ê·¸ ì™¸ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

<details>
<summary><b>ì—…ë¡œë“œ í›„ S3 ì„œë²„ì˜ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ìˆ˜ ì—†ìŒ</b></summary>

S3 ì„œë²„ì— í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë˜ ë„ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•˜ëŠ” ì—ëŸ¬ê°€ ìˆì—ˆë‹¤.  
ìƒˆë¡­ê²Œ ì €ì¥í•˜ëŠ” íŒŒì¼ì˜ ì´ë¦„ì„ logë¥¼ ì°ì–´ê°€ë©° ì‚´í´ë³´ë‹ˆ  
íŒŒì¼ ì´ë¦„ì— ë„ì–´ì“°ê¸°ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ S3 ì„œë²„ì—ì„œëŠ” ê·¸ëŒ€ë¡œ ì €ì¥ì„ í•˜ì§€ë§Œ
ì„œë²„ì—ì„œ í•´ë‹¹ ë¬¸ìì—´ì˜ ê³µë°±ì„ ê°•ì œë¡œ %20 ìœ¼ë¡œ ì¹˜í™˜í•˜ê³  ìˆì—ˆë‹¤.

í•´ì„œ í•´ë‹¹ íŒŒì¼ì˜ ì´ë¦„ì„ ì•„ë˜ì˜ ì½”ë“œë¡œ í™•ì¸í•˜ê³  ë„£ì–´ì£¼ì–´ ê³µë°±ì„ ì œê±°í•´ì£¼ì—ˆë‹¤.
~~~
.replace(" ","")
~~~


</details>

## ğŸ’¹ í–¥í›„ í”„ë¡œì íŠ¸ ëª©í‘œ

- ì¿¼ë¦¬ ê°œì„  ë° DB íŠœë‹ì„ í†µí•´ ë” ë†’ì€ ê°•ë„ì˜ ë¶€í•˜í…ŒìŠ¤íŠ¸ í†µê³¼